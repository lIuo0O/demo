C51 COMPILER V9.54   WDT                                                                   10/25/2018 14:29:19 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE WDT
OBJECT MODULE PLACED IN .\Objects\WDT.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Src\WDT.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Src) DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\WDT.lst) TABS(2) OBJECT(.\Objects\WDT.obj)

line level    source

   1          //Program Size: data=9.0 xdata=0 code=122
   2          //HexConvertVer = V24
   3          //CheckSum = 0xC596
   4          
   5          #include "WDT.h"
   6          
   7          
   8          /*PFLAG 寄存器介绍
   9            PFLAG bit7 若单片机已经由LVD触发复位,则该位自动置1 
  10            PFLAG bit6 若单片机已经由看门狗触发复位,则该位自动置1 
  11            PFLAG bit5 若单片机已经由外部复位引脚触发复位,则该位自动置1 
  12          */
  13            
  14          
  15          void main(void)
  16          {
  17   1        Systeminit();
  18   1        while(1)
  19   1        { 
  20   2          WDTR = 0x5A;
  21   2        }
  22   1      }
  23          
  24          void Systeminit(void)
  25          { 
  26   1      //系统时钟寄存器,From 最大跑8M  
  27   1      //====================================================================================//
  28   1        CLKSEL = 0x06;                                        // Fcpu = 32M/2 = 16M
  29   1        CLKCMD = 0x69;        
  30   1        CKCON = 0x10;   
  31   1      
  32   1      //清看门狗
  33   1      //====================================================================================//  
  34   1        WDTR = 0x5A;                                           // clear watchdog 
  35   1      
  36   1        if((PFLAG & 0x40)== 0x40)                               //Watchdog Reset   P0 put low
  37   1        { 
  38   2          P0UR = 0x00;
  39   2          P0 = 0x00;
  40   2          P0M = 0xff;
  41   2          
  42   2          P1UR = 0x00;
  43   2          P1 = 0xff;
  44   2          P1M = 0xff;
  45   2          
  46   2          P2UR = 0x00;
  47   2          P2 = 0x00;
  48   2          P2M = 0xff;
  49   2          
  50   2        }
  51   1        else if((PFLAG & 0x80)== 0x80)                            //LVD Reset P1 put low
  52   1        { 
  53   2          P0UR = 0x00;
  54   2          P0 = 0xff;
C51 COMPILER V9.54   WDT                                                                   10/25/2018 14:29:19 PAGE 2   

  55   2          P0M = 0xff;
  56   2          
  57   2          P1UR = 0x00;
  58   2          P1 = 0x00;
  59   2          P1M = 0xff;
  60   2          
  61   2          P2UR = 0x00;
  62   2          P2 = 0xff;
  63   2          P2M = 0xff;
  64   2          
  65   2        } 
  66   1        else if((PFLAG & 0x20)== 0x20)                            //外部电路 Reset P2 put low
  67   1        {
  68   2          P0UR = 0x00;
  69   2          P0 = 0xff;
  70   2          P0M = 0xff;
  71   2          
  72   2          P1UR = 0x00;
  73   2          P1 = 0xff;
  74   2          P1M = 0xff;
  75   2          
  76   2          P2UR = 0x00;
  77   2          P2 = 0x00;
  78   2          P2M = 0xff;
  79   2            
  80   2        }
  81   1        else                                                  //other Reset P0 P1 low
  82   1        {
  83   2          P0UR = 0x00;
  84   2          P0 = 0x00;
  85   2          P0M = 0xff;
  86   2          
  87   2          P1UR = 0x00;
  88   2          P1 = 0x00;
  89   2          P1M = 0xff;
  90   2          
  91   2          P2UR = 0x00;
  92   2          P2 = 0xff;
  93   2          P2M = 0xff;   
  94   2        }
  95   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     97    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
