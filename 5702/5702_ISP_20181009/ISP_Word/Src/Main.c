//Program Size: data=107.0 xdata=0 code=528
//HexConvertVer = V22
//CheckSum = 0x9E6A
//2018.09.10_V2.3
#include "ISP.h"

//=============================================================================================================//
//main loop
//=============================================================================================================//
void main(void)
{
	Systeminit();																			
	ISPinit();																							//写入需要存入Flash中的数据
	ISPpagewrite(r_isp_write_data);												  //写ISP
	ISPpageread1();																				  //按照数组名称读rom
	_nop_();
	_nop_();		
	_nop_();
	_nop_();		
	ISPpageread2();																					//按照地址读rom
	while(1)
	{
		WDTR = 0x5a;
	}
}


//====================================================================================================//
//Systeminit init 
//====================================================================================================//
void Systeminit(void)
{

//系统时钟寄存器,From 最大跑8M	
//====================================================================================//
	CLKSEL = 0x07;																				 // Fcpu = 32M/2 = 16M
	CLKCMD = 0x69;				
	CKCON = 0x30;																					 // From = 8M

//清看门狗
//====================================================================================//	
	WDTR = 0x5A;                   												 // clear watchdog 
	
//GPIO初始化,	
//====================================================================================//	
	P0 = 0;
	P0M = 0;
	P0UR = 0xff;
	
	P1 = 0;
	P1M = 0;
	P1UR = 0xff;
	
	P2 = 0;
	P2M = 0;
	P2UR = 0xff;		
}
