//T2定时1MS(PWM 频率1KHz)
//Program Size: data=9.0 xdata=0 code=172
//HexConvertVer = V22
//CheckSum = 0xA41E
//2018.10.09_V3.2
#include "T2COM.h"
//=================================================================================================//
//main loop
//=================================================================================================//
void main(void)
{
	Systeminit();
	T2COMinit();
	EAL = 1;
	while(1)
	{
		WDTR = 0x5a;
	}
}

//=================================================================================================//
//System init
//=================================================================================================//
void Systeminit(void)
{
//系统时钟寄存器,From 最大跑8M	
//====================================================================================//
	CLKSEL = 0x07;									// Fcpu = 32M/1 = 32M
	CLKCMD = 0x69;				
	CKCON = 0x30;										// From = 8M

//清看门狗
//====================================================================================//	
	WDTR = 0x5A;                    // clear watchdog 
	
//GPIO初始化,	T2COM口P10,P11,P12,P13初始化设为输出低,P5做为测试口
//====================================================================================//	
	P0 = 0;
	P0M = 0xff;
	P0UR = 0xff;

	P1 = 0;
	P1M = 0xff;									
	P1UR = 0xf0;

	P2 = 0;
	P2M = 0;                 
	P2UR = 0xff;		
}